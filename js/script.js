const userData = {
	USD: 1000,
	EUR: 900,
	UAH: 15000,
	BIF: 20000,
	AOA: 100
};

const bankData = {
    USD: {
        max: 3000,
        min: 100,
        img: 'üíµ'
    },
    EUR: {
        max: 1000,
        min: 50,
        img: 'üí∂'
    },
    UAH: {
        max: 0,
        min: 0,
        img: 'üí¥'
    },
    GBP: {
        max: 10000,
        min: 100,
        img: 'üí∑'
    }
}

const getMoney = (userData, bankData) => {
    return new Promise (function(resolve, reject) {
        const showBalance = confirm('–ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç–∏?');

        showBalance ? resolve(userData) : reject(userData, bankData);
    })
}

const getMoneyPromise = getMoney(userData, bankData);

getMoneyPromise
    .then(
        function() {
            let inputUserCurrency;

            do {
                inputUserCurrency = prompt('–í–≤–µ–¥—ñ—Ç—å –±–∞–∂–∞–Ω—É –≤–∞–ª—é—Ç—É:');
            } while (!userData.hasOwnProperty([inputUserCurrency]));

            return inputUserCurrency;
        },
        function() {
            let inputCurrency;
    
            do {
                inputCurrency = prompt('–í–≤–µ–¥—ñ—Ç—å –≤–∞–ª—é—Ç—É, —è–∫—É —Ö–æ—á–µ—Ç–µ –∑–Ω—è—Ç–∏:');
            } while (!userData.hasOwnProperty([inputCurrency]) || !bankData.hasOwnProperty([inputCurrency]) || bankData[inputCurrency].max === 0);

            return Promise.reject(inputCurrency)
        }
    )
    .then(
        function(inputUserCurrency) {
            console.log(`–ë–∞–ª–∞–Ω—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—å: ${userData[inputUserCurrency]} ${inputUserCurrency}`);
        },
        function(inputCurrency) {
            const inputCash = +prompt('–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É –∑–Ω—è—Ç—Ç—è –≥–æ—Ç—ñ–≤–∫–∏:');

            return new Promise((resolve, reject) => {
                const finalResult = `–û—Ç –í–∞—à—ñ –≥—Ä–æ—à—ñ: ${inputCash} ${inputCurrency} ${bankData[inputCurrency].img}`;

                const isBigger = inputCash > userData[inputCurrency] && inputCash > bankData[inputCurrency].max;
                const isSmaller = inputCash < bankData[inputCurrency].min;

                if (isBigger) {
                    console.log(`–í–≤–µ–¥–µ–Ω–∞ —Å—É–º–∞ –±—ñ–ª—å—à–∞ –∑–∞ –¥–æ—Å—Ç—É–ø–Ω—É. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–Ω—è—Ç—Ç—è: ‚Ä¶`);
                    return;
                };
                if (isSmaller) {
                    console.log(`–í–≤–µ–¥–µ–Ω–∞ —Å—É–º–∞ –º–µ–Ω—à–∞ –∑–∞ –¥–æ—Å—Ç—É–ø–Ω—É. –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–Ω—è—Ç—Ç—è: ‚Ä¶ `);
                    return;
                };

                inputCash ? resolve(finalResult) : reject();
            })
        }
    )
    .then((finalResult) => {
        finalResult ? console.log(finalResult) : Promise.finally;
    }, () => {
        console.error('Wrong DATA: NaN');
    },
    )
    .finally(
        setTimeout(() => {
            console.log('–î—è–∫—É—é, –≥–∞—Ä–Ω–æ–≥–æ –¥–Ω—è üòä')
        }, 1000)
    )
    




    // console.log(`–í–≤–µ–¥–µ–Ω–∞ —Å—É–º–∞ –±—ñ–ª—å—à–∞ –∑–∞ –¥–æ—Å—Ç—É–ø–Ω—É. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–Ω—è—Ç—Ç—è: ‚Ä¶`);
    // console.log(`–í–≤–µ–¥–µ–Ω–∞ —Å—É–º–∞ –º–µ–Ω—à–∞ –∑–∞ –¥–æ—Å—Ç—É–ø–Ω—É. –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–Ω—è—Ç—Ç—è: ‚Ä¶ `);